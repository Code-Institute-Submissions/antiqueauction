{"changed":true,"filter":false,"title":"contexts.py","tooltip":"/checkout/contexts.py","value":"from django.shortcuts import get_object_or_404\nfrom products.models import Product\n\n\ndef cart_contents(request):\n    \"\"\"\n    Ensures that the cart contents are available when rendering every page\n    \"\"\"\n    \n    cart = request.session.get('cart', {})\n    \n    cart_items = []\n    total = 0\n    product_count = 0\n    for id, quantity in cart.items():\n        product = get_object_or_404(Product, pk=id)\n        total += quantity * product.price\n        product_count += quantity\n        cart_items.append({'id':id, 'quantity': quantity, 'product': product})\n        \n    return { 'cart_items': cart_items, 'total': total, 'product_count': product_count }\n    ","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":21,"column":4},"action":"insert","lines":["from django.shortcuts import get_object_or_404","from products.models import Product","","","def cart_contents(request):","    \"\"\"","    Ensures that the cart contents are available when rendering every page","    \"\"\"","    ","    cart = request.session.get('cart', {})","    ","    cart_items = []","    total = 0","    product_count = 0","    for id, quantity in cart.items():","        product = get_object_or_404(Product, pk=id)","        total += quantity * product.price","        product_count += quantity","        cart_items.append({'id':id, 'quantity': quantity, 'product': product})","        ","    return { 'cart_items': cart_items, 'total': total, 'product_count': product_count }","    "],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":21,"column":4},"end":{"row":21,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1579087833153}